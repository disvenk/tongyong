var SUBMIT=1;var PAYMENT=2;var KITCHENPROCESS=3;var KITCHENDONE=4;var READY=5;var EXPRESS=6;var ARRIVED=7;var EXPIRED=8;var CANCEL=9;var CONFIRM=10;var HASAPPRAISE=11;var SHARED=12;function order2li(a,t){var s=a.ORDER_STATE;var e="";var r="";var E="";switch(s){case SUBMIT:e="等待付款";E="<p data-remain='"+a.REMAIN_TIME+"' class='show-remain-time'></p>"+"<button type='button' class='btn minor' onclick='cancelOrder(this)'>取消订单</button>"+"<button type='button' class='btn major' onclick='payOrder(this)'>付款</button>";break;case PAYMENT:e="待消费";E="<p class='use-code'>消费码:"+t.substr(7)+"</p>";if(a.DISTRIBUTION_MODE_ID==2){E+="<a class='btn minor' href='tel:"+a.EMP_PHONE+"'><i class=' icon-phone'></i> "+(a.EMP_NAME||"配送员")+"</a>"}E+="<button type='button' class='btn minor' onclick='cancelOrder(this)'>取消订单</button>";break;case CONFIRM:e="等待评价";if(a.DISTRIBUTION_MODE_ID==2){E="<p class='use-code'>消费码:"+t.substr(7)+"</p>";E+="<a class='btn minor' href='tel:"+a.EMP_PHONE+"'><i class=' icon-phone'></i> "+(a.EMP_NAME||"配送员")+"</a>"}E+="<button type='button' class='btn major' onclick='appraiseOrder(this)'><i class=' icon-edit'></i>  写评价</button>";break;case CANCEL:e="交易取消";r="cancel";break;case HASAPPRAISE:e="已评价";E="<button type='button' class='btn major' onclick='shareOrder(this)'>分享</button>";break;case SHARED:e="已分享";break;default:e="订单处理中";break}a.ORDER_TIME=new Date(a.ORDER_TIME).format("yyyy-MM-dd hh:mm");var n=$('<li class="order-item">                                                                             '+'	<div class="orderListTitle">					                                                 '+'		<p>[<span data-key="MODE_NAME">外卖</span>]<span data-key="RESTAURANT_NAME"></span></p>      '+'		<p class="orderListTitleInfo" data-key="ADDRESS">就餐地址</p>                                '+'		<p class="orderListTitleInfo" data-key="TIME">取餐时间</p>                                   '+'		<p class="orderListTitleInfo" data-key="PHONE">消费手机</p>                                  '+'		<p class="orderListTitleInfo" data-key="ORDER_TIME">2015-09-08 12:16</p>                     '+'		<span class="orderStatus" data-key="STATE_TEXT">订单状态</span>                              '+"	</div>                                                                                           "+'	<p class="article-names"></p>                                                                    '+'	<div class="orderAmount">                                                                        '+'		<span class="priceText" data-key="PAYMENT_AMOUNT">188.00</span>                              '+'		<span>共计<i data-key="ARTICLE_COUNT">6</i>个餐品</span>                                     '+"	</div>		                                                                                     "+'	<div class="orderOperation">                                                                     '+'		<button type="button" class="btn major">分享</button>                                        '+"	</div>                                                                                           "+"</li>                                                                                               ");a.PHONE="消费手机: "+b(t);a.STATE_TEXT=e;if(a.DISTRIBUTION_MODE_ID==1||a.DISTRIBUTION_MODE_ID==3){a.MODE_NAME="堂吃";a.ADDRESS="堂吃地址: "+b(a.ADDRESS);if(a.DISTRIBUTION_MODE_ID==3){a.MODE_NAME="外带";a.ADDRESS="外带地址: "+b(a.ADDRESS)}a.RESTAURANT_NAME=a.SHOP_DES;a.ORDER_TIME="下单时间: "+b(a.ORDER_TIME);$(n).find("[data-key='TIME']").remove()}else{a.MODE_NAME="外卖";a.ADDRESS="取餐地址: "+b(a.DETAIL);a.RESTAURANT_NAME=a.DELIVERY_POINT_NAME;a.TIME="取餐时间: "+b(a.DISTRIBUTION_DATE+" "+a.DISTRIBUTION_TIME);$(n).find("[data-key='ORDER_TIME']").remove()}n.setAjaxParam(a);n.attr("data-id",a.ORDER_ID);var i=[];for(var o in a.ARTICLE_NAMES){var T=a.ARTICLE_NAMES[o];i.push("<span>"+T+"</span>")}i.push("<div style='clear:both'></div>");n.find(".article-names").html(i);n.find(".orderStatus").addClass(r);var c=$(E);n.find(".orderOperation").html(c);return n}function b(a){return"<b>"+a+"</b>"}